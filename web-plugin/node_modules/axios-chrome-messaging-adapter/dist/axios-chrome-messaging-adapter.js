/*! For license information please see axios-chrome-messaging-adapter.js.LICENSE.txt */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("axios")):"function"==typeof define&&define.amd?define("axiosChromeMessagingAdapter",["axios"],r):"object"==typeof exports?exports.axiosChromeMessagingAdapter=r(require("axios")):e.axiosChromeMessagingAdapter=r(e.axios)}("undefined"!=typeof self?self:this,(function(e){return(()=>{"use strict";var r={346:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.adapter=r.unsupportedAxiosOptions=void 0;const a=t(593);function o(e){return Object.keys(e).filter((e=>{const t=-1!==r.unsupportedAxiosOptions.indexOf(e);return t&&console.warn(`Axios Chrome Messaging adapter: skipped unsupported axios option "${e}"`),!t})).reduce(((r,t)=>(r[t]=e[t],r)),{})}r.unsupportedAxiosOptions=["paramsSerializer","onUploadProgress","onDownloadProgress","cancelToken","transformRequest","transformResponse"],r.adapter=function(e){return new Promise(((r,t)=>{const n=o(e);a.isArrayBuffer(n.data)&&(n.data=a.arrayBufferToDataURL(n.data)),chrome.runtime.sendMessage({name:"axiosMessagingAdapterRequest",axiosConfig:o(e)},(e=>chrome.runtime.lastError?t(chrome.runtime.lastError):e.error?t(e.error):r(e.response)))}))}},243:function(e,r,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.registerMessageHandler=void 0;const o=a(t(375)),n=t(593);r.registerMessageHandler=function(e={}){chrome.runtime.onMessage.addListener(((r,t,a)=>{if("axiosMessagingAdapterRequest"===r.name){if(n.isChromeManifestV3()&&!e.adapter){const e=new Error("When using manifest v3, XMLHttpRequest is not available in service workers please use a custom adapter.");return console.warn(e.message),a({error:e}),!0}return e.adapter&&(r.axiosConfig.adapter=e.adapter),n.isArrayBufferDataUrl(r.axiosConfig.data)&&(r.axiosConfig.data=n.dataURLToArrayBuffer(r.axiosConfig.data)),o.default(r.axiosConfig).then((e=>a({response:e}))).catch((e=>a({error:e}))),!0}return!1}))}},593:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.dataURLToArrayBuffer=r.arrayBufferToDataURL=r.isArrayBufferDataUrl=r.isArrayBuffer=r.isChromeManifestV3=void 0,r.isChromeManifestV3=function(){const{manifest_version:e}=chrome.runtime.getManifest();return 3===e},r.isArrayBuffer=function(e){return null!=e&&e.constructor===ArrayBuffer},r.isArrayBufferDataUrl=function(e){return(e||"").trim().startsWith("data:encoded-array-buffer;base64,")},r.arrayBufferToDataURL=function(e){return`data:encoded-array-buffer;base64,${function(e){const r=new Uint8Array(e),t=r.byteLength;let a="";for(let e=0;e<t;e++)a+=String.fromCharCode(r[e]);return window.btoa(a)}(e)}`},r.dataURLToArrayBuffer=function(e){return function(e){const r=window.atob(e),t=r.length,a=new Uint8Array(t);for(let e=0;e<t;e++)a[e]=r.charCodeAt(e);return a.buffer}(e.substring(e.indexOf(",")+1))}},375:r=>{r.exports=e}},t={};function a(e){if(t[e])return t[e].exports;var o=t[e]={exports:{}};return r[e].call(o.exports,o,o.exports,a),o.exports}var o={};return(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.registerMessageHandler=e.adapter=void 0;var r=a(346);Object.defineProperty(e,"adapter",{enumerable:!0,get:function(){return r.adapter}});var t=a(243);Object.defineProperty(e,"registerMessageHandler",{enumerable:!0,get:function(){return t.registerMessageHandler}})})(),o})()}));
//# sourceMappingURL=axios-chrome-messaging-adapter.js.map