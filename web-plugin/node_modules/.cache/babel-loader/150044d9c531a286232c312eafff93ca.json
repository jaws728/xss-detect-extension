{"ast":null,"code":"import axios from 'axios';\nimport { registerMessageHandler } from 'axios-chrome-messaging-adapter';\nimport fetchAdapter from '@vespaiach/axios-fetch-adapter';\nconst APIURL = 'http://127.0.0.1:5000'; // register the adapter message hanlder\n// registerMessageHandler()\n// const instance = axios.create({\n//   baseURL: 'http://127.0.0.1:5000',\n//   timeout: 1000,\n//   adapter: fetchAdapter\n// })\n\nregisterMessageHandler({\n  adapter: fetchAdapter\n});\n\nasync function getUrl() {\n  var q = await chrome.tabs.getCurrent();\n  console.log(q);\n}\n\ngetUrl();\nconsole.log('TABS-chrome: ', chrome.tabs.getCurrent());\n\nfunction sendReq(q) {\n  return axios({\n    url: APIURL + '/api/model?q=' + q,\n    method: 'post',\n    // data: {q: q},\n    adapter: fetchAdapter\n  }); //axios.post(`${APIURL}/api/model`, {q})\n}\n\nchrome.tabs.onUpdated.addListener(async function (tabId, changeInfo, tab) {\n  console.log('ChangeInfo: ', changeInfo);\n  console.log('TAB-url: ', tab.url);\n  console.log('TAB ID: ', tabId);\n  chrome.storage.local.set({\n    url: tab.url\n  });\n\n  if (changeInfo.url) {\n    try {\n      let {\n        data: res\n      } = await sendReq(changeInfo.url);\n      console.log(res);\n      chrome.storage.local.set({\n        xss: res\n      });\n    } catch (err) {\n      console.error('Error: ', err);\n      chrome.storage.local.remove(xss);\n    }\n  }\n});","map":{"version":3,"names":["axios","registerMessageHandler","fetchAdapter","APIURL","adapter","getUrl","q","chrome","tabs","getCurrent","console","log","sendReq","url","method","onUpdated","addListener","tabId","changeInfo","tab","storage","local","set","data","res","xss","err","error","remove"],"sources":["D:/jaws7/Desktop/lab/code/web-plugin/src/entry/background.js"],"sourcesContent":["import axios from 'axios';\nimport { registerMessageHandler } from 'axios-chrome-messaging-adapter';\nimport fetchAdapter from '@vespaiach/axios-fetch-adapter';\n\nconst APIURL = 'http://127.0.0.1:5000';\n// register the adapter message hanlder\n// registerMessageHandler()\n// const instance = axios.create({\n//   baseURL: 'http://127.0.0.1:5000',\n//   timeout: 1000,\n//   adapter: fetchAdapter\n// })\nregisterMessageHandler({ adapter: fetchAdapter });\n\nasync function getUrl() {\n  var q = await chrome.tabs.getCurrent();\n  console.log(q);\n}\ngetUrl();\n\nconsole.log('TABS-chrome: ', chrome.tabs.getCurrent());\nfunction sendReq(q) {\n  return axios({\n    url: APIURL + '/api/model?q=' + q,\n    method: 'post',\n    // data: {q: q},\n    adapter: fetchAdapter,\n  }); //axios.post(`${APIURL}/api/model`, {q})\n}\n\nchrome.tabs.onUpdated.addListener(async function (tabId, changeInfo, tab) {\n  console.log('ChangeInfo: ', changeInfo);\n  console.log('TAB-url: ', tab.url);\n  console.log('TAB ID: ', tabId);\n  chrome.storage.local.set({ url: tab.url });\n  if (changeInfo.url) {\n    try {\n      let { data: res } = await sendReq(changeInfo.url);\n      console.log(res);\n      chrome.storage.local.set({ xss: res });\n    } catch (err) {\n      console.error('Error: ', err);\n      chrome.storage.local.remove(xss);\n    }\n  }\n});\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,sBAAT,QAAuC,gCAAvC;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AAEA,MAAMC,MAAM,GAAG,uBAAf,C,CACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAF,sBAAsB,CAAC;EAAEG,OAAO,EAAEF;AAAX,CAAD,CAAtB;;AAEA,eAAeG,MAAf,GAAwB;EACtB,IAAIC,CAAC,GAAG,MAAMC,MAAM,CAACC,IAAP,CAAYC,UAAZ,EAAd;EACAC,OAAO,CAACC,GAAR,CAAYL,CAAZ;AACD;;AACDD,MAAM;AAENK,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BJ,MAAM,CAACC,IAAP,CAAYC,UAAZ,EAA7B;;AACA,SAASG,OAAT,CAAiBN,CAAjB,EAAoB;EAClB,OAAON,KAAK,CAAC;IACXa,GAAG,EAAEV,MAAM,GAAG,eAAT,GAA2BG,CADrB;IAEXQ,MAAM,EAAE,MAFG;IAGX;IACAV,OAAO,EAAEF;EAJE,CAAD,CAAZ,CADkB,CAMd;AACL;;AAEDK,MAAM,CAACC,IAAP,CAAYO,SAAZ,CAAsBC,WAAtB,CAAkC,gBAAgBC,KAAhB,EAAuBC,UAAvB,EAAmCC,GAAnC,EAAwC;EACxET,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BO,UAA5B;EACAR,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBQ,GAAG,CAACN,GAA7B;EACAH,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBM,KAAxB;EACAV,MAAM,CAACa,OAAP,CAAeC,KAAf,CAAqBC,GAArB,CAAyB;IAAET,GAAG,EAAEM,GAAG,CAACN;EAAX,CAAzB;;EACA,IAAIK,UAAU,CAACL,GAAf,EAAoB;IAClB,IAAI;MACF,IAAI;QAAEU,IAAI,EAAEC;MAAR,IAAgB,MAAMZ,OAAO,CAACM,UAAU,CAACL,GAAZ,CAAjC;MACAH,OAAO,CAACC,GAAR,CAAYa,GAAZ;MACAjB,MAAM,CAACa,OAAP,CAAeC,KAAf,CAAqBC,GAArB,CAAyB;QAAEG,GAAG,EAAED;MAAP,CAAzB;IACD,CAJD,CAIE,OAAOE,GAAP,EAAY;MACZhB,OAAO,CAACiB,KAAR,CAAc,SAAd,EAAyBD,GAAzB;MACAnB,MAAM,CAACa,OAAP,CAAeC,KAAf,CAAqBO,MAArB,CAA4BH,GAA5B;IACD;EACF;AACF,CAfD"},"metadata":{},"sourceType":"module"}