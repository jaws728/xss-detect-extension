{"ast":null,"code":"import axios from 'axios';\nimport { registerMessageHandler } from 'axios-chrome-messaging-adapter';\nimport fetchAdapter from '@vespaiach/axios-fetch-adapter';\nimport { resolve } from 'core-js/fn/promise';\nconst APIURL = 'http://127.0.0.1:5000'; // register the adapter message hanlder\n// registerMessageHandler()\n// const instance = axios.create({\n//   baseURL: 'http://127.0.0.1:5000',\n//   timeout: 1000,\n//   adapter: fetchAdapter\n// })\n\nregisterMessageHandler({\n  adapter: fetchAdapter\n}); // var q = chrome.tabs;\n// console.log('TABS-chrome: ', chrome.tabs);\n\nfunction sendReq(q) {\n  return axios({\n    url: APIURL + '/api/model?q=' + q,\n    method: 'post',\n    // data: {q: q},\n    adapter: fetchAdapter\n  }); //axios.post(`${APIURL}/api/model`, {q})\n}\n\nchrome.tabs.onUpdated.addListener(async function (tabId, changeInfo, tab) {\n  console.log('ChangeInfo: ', changeInfo);\n  console.log('TAB-url: ', tab.url);\n  console.log('TAB ID: ', tabId);\n  chrome.storage.local.set({\n    url: tab.url\n  });\n\n  if (changeInfo.url) {\n    try {\n      let {\n        data: res\n      } = await sendReq(changeInfo.url);\n      console.log(res);\n      chrome.storage.local.set({\n        xss: res\n      });\n    } catch (err) {\n      console.error(err.response.data);\n      chrome.storage.local.remove(xss);\n    }\n  }\n});","map":null,"metadata":{},"sourceType":"module"}